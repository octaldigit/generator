<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Serotonin Dots</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
    
        body {
            width: 100%;
            height: 100vh;
            overflow: hidden;
            background: #ee00ff;
            display: flex; 
            justify-content: center;
            align-items: center;
        }
        
        canvas {
            display: block;
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>

<script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    
    let dots = []; 
    
    const TOTAL_DOTS = 150;  
    
    const DRAW_COLOR_BASE = 'rgba(255, 255, 255, '; 
    
    const BASE_DOT_SIZE = 1.0; 
    
    const MAX_SPEED = 1.0; 

    const RGB_A = {r: 238, g: 0, b: 255};
    const RGB_B = {r: 0, g: 238, b: 255};

    const TRANSITION_SECONDS = 15;
    const TRANSITION_FRAMES = TRANSITION_SECONDS * 60;

    let currentFrame = 0;
    let direction = 1;
    const bodyStyle = document.body.style;

    function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        
        dots = [];
        initializeDots();
    }
    
    function createDot() {
        const x = Math.random() * canvas.width;
        const y = Math.random() * canvas.height;
        
        const sizeFactor = 1.0 + Math.random() * 2; 
        const size = BASE_DOT_SIZE * sizeFactor;
        
        const opacity = 0.1 + Math.random() * 0.8; 
        
        const vx = (Math.random() * 2 - 1) * MAX_SPEED;
        const vy = (Math.random() * 2 - 1) * MAX_SPEED;

        return {x, y, size, opacity, vx, vy};
    }
    
    function initializeDots() {
        for (let i = 0; i < TOTAL_DOTS; i++) {
            dots.push(createDot());
        }
    }

    function updateBackground(progress) {
        let start, end;
        if (direction === 1) {
            start = RGB_A;
            end = RGB_B;
        } else {
            start = RGB_B;
            end = RGB_A;
        }

        const currentR = start.r + (end.r - start.r) * progress;
        const currentG = start.g + (end.g - start.g) * progress;
        const currentB = start.b + (end.b - start.b) * progress;

        const R = Math.round(currentR);
        const G = Math.round(currentG);
        const B = Math.round(currentB);
        
        bodyStyle.background = `rgb(${R}, ${G}, ${B})`;

        const trailColor = `rgba(${R}, ${G}, ${B}, 0.05)`;
        ctx.fillStyle = trailColor;
    }

    function updateAndDrawDots() {
        ctx.fillRect(0, 0, canvas.width, canvas.height); 

        for (let i = 0; i < dots.length; i++) {
            const dot = dots[i];
            
            dot.x += dot.vx;
            dot.y += dot.vy;
            
            if (dot.x < -dot.size) dot.x = canvas.width;
            if (dot.x > canvas.width) dot.x = -dot.size;
            if (dot.y < -dot.size) dot.y = canvas.height;
            if (dot.y > canvas.height) dot.y = -dot.size;
            
            ctx.fillStyle = `${DRAW_COLOR_BASE}${dot.opacity})`;
            ctx.fillRect(dot.x, dot.y, dot.size, dot.size);
        }
    }
    
    function animate() {
        let progress = currentFrame / TRANSITION_FRAMES;

        updateBackground(progress);

        currentFrame += direction;

        if (currentFrame > TRANSITION_FRAMES) {
            currentFrame = TRANSITION_FRAMES;
            direction = -1; 
        } else if (currentFrame < 0) {
            currentFrame = 0;
            direction = 1; 
        }

        updateAndDrawDots(); 
        requestAnimationFrame(animate);
    }
    
    window.addEventListener('resize', () => {
        resizeCanvas(); 
    });
    
    resizeCanvas();
    animate();
</script>
</body>
</html>